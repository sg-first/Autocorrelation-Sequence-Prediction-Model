疫情预测备胎模型
===========
原理
---------
该模型基于坐标变换。基本假设是：不同地区的整个疫情进程整体形态相似，只是曲线的高低长短形态有所不同。所以我们通过一个已经经历整个疫情进程地区的曲线，进行坐标映射和尺度放缩得到其它地区的曲线。

形式化表示即为，设已知完整进程曲线`f(x)`，引入坐标变换函数`g`和尺度变换函数`h`，得新曲线`h(f(g(x')))`，`x'`为新地区的自变量（我们的例子中为天数）。

当前`f(x)`已知，需要求`g`与`h`的参数。这里我们使用反向传播算法，希望`f(x)`以最小的变换代价贴合所求地区的已知曲线，这个变换通过`g`与`h`完成，达成最小代价即代表着二者取到最优参数。这样，在所得曲线贴合当前地区已知曲线的同时，通过`f(x)`提供的先验形态，该地区样本外的曲线值也可以得到估计。

实施
----------
因为要使用反向传播算法，所以必须得到`f`、`g`与`h`三者可微的表示。`f(x)`可以通过任意函数拟合的方式求得，三次样条插值是我们推荐的手段。`g`与`h`因为需要在反向传播的过程中调整，因此这里我们使用两个简单的神经网络模型来表示。为了方便编程，`f(x)`也就直接使用神经网络拟合得到。如果你使用其它插值方法求得`f(x)`的解析式，那么可以使用keras的自定义层来替换我们例子中表示`f(x)`的网络。

我们的例子模型示意图如下：
![备胎模型](备胎模型.png)

需要注意的是`g`与`h`的函数原型。`h`表示对`f(x)`的尺度变换，因此需要控制其表达能力，我们使用了简单的单线性层。如果将`h`设计的过于复杂，反向传播过程将直接通过`h`函数拟合当前地区的形态，而不是试图对`f(x)`进行变换（因为这相比直接调整`h`代价更大）。`g`的原型取决于你所期待的坐标变换形式，在我们的例子是一个简单的`时间-人数`的一维函数，那么从x轴来说，我只希望它进行左右平移和放缩，即一维仿射变换。所以在设计中只尝试使用数个带偏置的线性层组合（在后来因为效果不理想，克制地更换了一些relu）。如果觉得你所要达到的效果有必要使用更复杂的映射函数，那么可以酌情进行修改。不过值得庆幸的是，即使`g`相对较深也不会像`h`那样对结果直接造成严重影响，因为`g`只决定了`f`的自变量，最终的曲线值还是由`f`计算得到。

针对高维问题的考虑
--